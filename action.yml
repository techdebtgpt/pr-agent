name: 'PR Analyzer'
description: 'Analyze pull requests using AI to provide code review insights'
author: 'Your Team'
branding:
  icon: 'zap'
  color: 'blue'

inputs:
  config-path:
    description: 'Path to the configuration file'
    required: false
    default: '.pr-analyzer.yml'

runs:
  using: composite
  steps:
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20

    - name: Install dependencies
      run: npm ci
      shell: bash

    - name: Build action
      run: npx tsc src/action.ts --target ES2022 --module commonjs --outDir dist
      shell: bash

    - name: Run action
      run: node dist/action.js
      shell: bash
      env:
        CONFIG_PATH: ${{ inputs.config-path }}

